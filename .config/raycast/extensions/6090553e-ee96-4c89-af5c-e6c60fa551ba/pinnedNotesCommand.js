var J=Object.create;var g=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var Q=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,q=Object.prototype.hasOwnProperty;var k=e=>g(e,"__esModule",{value:!0});var H=(e,n)=>{for(var t in n)g(e,t,{get:n[t],enumerable:!0})},x=(e,n,t,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of Q(n))!q.call(e,a)&&(t||a!=="default")&&g(e,a,{get:()=>n[a],enumerable:!(o=M(n,a))||o.enumerable});return e},f=(e,n)=>x(k(g(e!=null?J(E(e)):{},"default",!n&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),W=(e=>(n,t)=>e&&e.get(n)||(t=x(k({}),n,1),e&&e.set(n,t),t))(typeof WeakMap!="undefined"?new WeakMap:0);var B={};H(B,{default:()=>U});var y=require("@raycast/api");var S=require("@raycast/api"),A=f(require("fs")),F=f(require("path"));function d(e){let n=(0,S.getPreferenceValues)(),t="";try{t=A.default.readFileSync(e.path,"utf8")}catch{t="Couldn't read file. Did you move, delete or rename the file?"}if(n.removeYAML){let o=t.match(/---(.|\n)*?---/gm);o&&(t=t.replace(o[0],""))}if(n.removeLatex){let o=t.matchAll(/\$\$(.|\n)*?\$\$/gm);for(let s of o)t=t.replace(s[0],"");let a=t.matchAll(/\$(.|\n)*?\$/gm);for(let s of a)t=t.replace(s[0],"")}return n.removeLinks&&(t=t.replaceAll("![[",""),t=t.replaceAll("[[",""),t=t.replaceAll("]]","")),t}function X(e){let n=e.split(F.default.sep).filter(t=>{if(t!="")return t}).pop();return n||"Default Vault Name (check your path preferences)"}function L(){return(0,S.getPreferenceValues)().vaultPath.split(",").map(t=>({name:X(t.trim()),key:t.trim(),path:t.trim()})).filter(t=>!!t)}var u=require("@raycast/api");function C(e){let n=e.vaults;return _jsx(u.List,null,n?.map(t=>_jsx(u.List.Item,{title:t.name,key:t.key,actions:_jsx(u.ActionPanel,null,_jsx(u.Action.Push,{title:"Select Vault",target:e.target(t)}))})))}var N=require("react");var l=require("@raycast/api"),$=require("react");var i=require("@raycast/api"),I=f(require("fs")),m=f(require("react"));var c=require("@raycast/api"),b=f(require("fs"));function T(e){let n=e.note,{pop:t}=(0,c.useNavigation)();function o(a){b.default.appendFileSync(n.path,`
`+a.content),(0,c.showToast)({title:"Added text to note",style:c.Toast.Style.Success}),t()}return _jsx(c.Form,{navigationTitle:"Add text to: "+n.title,actions:_jsx(c.ActionPanel,null,_jsx(c.Action.SubmitForm,{title:"Submit",onSubmit:o}))},_jsx(c.Form.TextArea,{title:`Add text to:
`+n.title,id:"content",placeholder:"Text"}))}var r=require("@raycast/api"),p=f(require("fs"));function P(e){p.default.existsSync(r.environment.supportPath+"/data.json")||p.default.writeFileSync(r.environment.supportPath+"/data.json","[]");let n=p.default.readFileSync(r.environment.supportPath+"/data.json","utf8"),t=JSON.parse(n),o=t.filter(a=>a.vaultPath==e);if(o.length==0){let a={vaultPath:e,pinnedNotes:[]};return t.push(a),p.default.writeFileSync(r.environment.supportPath+"/data.json",JSON.stringify(t)),{vault:a,pinnedNotes:a.pinnedNotes,data:t}}else return{vault:o[0],pinnedNotes:o[0].pinnedNotes,data:t}}function V(e){return P(e).pinnedNotes}function O(e,n){let t=P(n),o=t.pinnedNotes.filter(s=>s.key!==e.key);t.vault.pinnedNotes=o;let a=t.data.findIndex(s=>s.vaultPath==n);return t.data[a]=t.vault,p.default.writeFileSync(r.environment.supportPath+"/data.json",JSON.stringify(t.data)),(0,r.showToast)({title:"Note Unpinned",message:"'"+e.title+"' unpinned successfully.",style:r.Toast.Style.Success}),o}function h(e,n){return P(n).pinnedNotes.filter(o=>o.key==e.key).length!==0}function w(e,n){let t=P(n);if(h(e,n)){(0,r.showToast)({title:"Already Pinned",message:"'"+e.title+"' is already pinned.",style:r.Toast.Style.Failure});return}t.vault.pinnedNotes.push(e);let o=t.data.findIndex(a=>a.vaultPath==n);t.data[o]=t.vault,p.default.writeFileSync(r.environment.supportPath+"/data.json",JSON.stringify(t.data)),(0,r.showToast)({title:"Note Pinned",message:"'"+e.title+"' pinned successfully.",style:r.Toast.Style.Success})}async function Y(e){let t=(0,i.getPreferenceValues)().appendPrefix;t===void 0&&(t="");try{let o=await(0,i.getSelectedText)();o.trim()==""?(0,i.showToast)({title:"No text selected",message:"Make sure to select some text.",style:i.Toast.Style.Failure}):(I.default.appendFileSync(e.path,`
`+t+o),(0,i.showToast)({title:"Added selected text to note",style:i.Toast.Style.Success}))}catch{(0,i.showToast)({title:"Couldn't copy selected text",message:"Maybe you didn't select anything.",style:i.Toast.Style.Failure})}}function _(e){let n=e.note,t=d(n);return _jsx(i.Detail,{markdown:t,actions:_jsx(i.ActionPanel,null,_jsx(i.Action.Open,{title:"Open in Obsidian",target:"obsidian://open?path="+encodeURIComponent(n.path)}))})}function R(e){let n=e.note,[t,o]=(0,m.useState)(h(n,e.vaultPath));return _jsx(m.default.Fragment,null,_jsx(i.Action.Push,{title:"Append to Note",target:_jsx(T,{note:n}),shortcut:{modifiers:["opt"],key:"a"},icon:i.Icon.Pencil}),_jsx(i.Action,{title:"Append Selected Text to Note",shortcut:{modifiers:["opt"],key:"s"},onAction:()=>{Y(n)},icon:i.Icon.Pencil}),_jsx(i.Action.CopyToClipboard,{title:"Copy Note Content",content:d(n),shortcut:{modifiers:["opt"],key:"c"}}),_jsx(i.Action.Paste,{title:"Paste Note Content",content:d(n),shortcut:{modifiers:["opt"],key:"v"}}),_jsx(i.Action.CopyToClipboard,{title:"Copy Markdown Link",icon:i.Icon.Link,content:`[${n.title}](obsidian://open?path=${encodeURIComponent(n.path)})`,shortcut:{modifiers:["opt"],key:"l"}}),_jsx(i.Action.CopyToClipboard,{title:"Copy Obsidian URI",icon:i.Icon.Link,content:`obsidian://open?path=${encodeURIComponent(n.path)}`,shortcut:{modifiers:["opt"],key:"u"}}),_jsx(i.Action,{title:t?"Unpin Note":"Pin Note",shortcut:{modifiers:["opt"],key:"p"},onAction:()=>{t?(O(n,e.vaultPath),o(!t),e.onPin()):(w(n,e.vaultPath),o(!t),e.onPin())},icon:t?i.Icon.XmarkCircle:i.Icon.Pin}))}function D(e){let n=e.note,o=(0,i.getPreferenceValues)().primaryAction,a=_jsx(i.Action.Push,{title:"Quick Look",target:_jsx(_,{note:n,vaultPath:e.vaultPath}),icon:i.Icon.Eye}),s=_jsx(i.Action.Open,{title:"Open in Obsidian",target:"obsidian://open?path="+encodeURIComponent(n.path)});return o=="quicklook"?_jsx(m.default.Fragment,null,a,s):o=="obsidian"?_jsx(m.default.Fragment,null,s,a):_jsx(m.default.Fragment,null,a,s)}function z(e){let n=e.note,[t,o]=(0,$.useState)(h(n,e.vaultPath)),a=function(){o(!t)};return _jsx(l.List.Item,{title:n.title,accessories:[{text:t?"\u2B50\uFE0F":""}],detail:_jsx(l.List.Item.Detail,{markdown:d(n)}),actions:_jsx(l.ActionPanel,null,_jsx(D,{note:n,vaultPath:e.vaultPath}),_jsx(R,{note:n,vaultPath:e.vaultPath,onPin:a}))})}function j(e){let n=e.notes,t=e.action,o=n===void 0;n!==void 0&&(o=n.length==0),e.isLoading!==void 0&&(o=e.isLoading);let a=(0,l.getPreferenceValues)();return _jsx(l.List,{isLoading:o,isShowingDetail:a.showDetail},n?.map(s=>_jsx(z,{note:s,vaultPath:e.vaultPath,key:s.key})))}function v(e){let[n,t]=(0,N.useState)();return(0,N.useEffect)(()=>{let o=V(e.vaultPath);t(o)},[]),_jsx(j,{notes:n,isLoading:n===void 0,vaultPath:e.vaultPath})}function U(){let e=L();if(e.length>1)return _jsx(C,{vaults:e,target:n=>_jsx(v,{vaultPath:n.path})});if(e.length==1)return _jsx(v,{vaultPath:e[0].path});(0,y.showToast)({title:"Path Error",message:"Something went wrong with your vault path. There are no paths to select from.",style:y.Toast.Style.Failure})}module.exports=W(B);0&&(module.exports={});
